!function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/",t(t.s=0)}([function(e,r,t){function n(e,r,t,n,o,i,c){try{var a=e[i](c),u=a.value}catch(e){return void t(e)}a.done?r(u):Promise.resolve(u).then(n,o)}function o(e){return function(){var r=this,t=arguments;return new Promise(function(o,i){var c=e.apply(r,t);function a(e){n(c,o,i,a,u,"next",e)}function u(e){n(c,o,i,a,u,"throw",e)}a(void 0)})}}t(1),t(2);var i=t(4);Oidc.Log.logger=console,Oidc.Log.level=Oidc.Log.DEBUG;var c={authority:i.authorityServer,client_id:"spa",redirect_uri:"".concat(i.webServer,"/callback"),post_logout_redirect_uri:"".concat(i.webServer),response_type:"id_token token",scope:"inventory_api_scope cart_api_scope pricing_api_scope review_api_scope catalog_api_scope rating_api_scope openid profile",popup_redirect_uri:"".concat(i.webServer,"/callback"),popup_post_logout_redirect_uri:"".concat(i.webServer),silent_redirect_uri:"".concat(i.webServer,"/silent"),automaticSilentRenew:!0,filterProtocolClaims:!0,loadUserInfo:!0},a=new Oidc.UserManager(c);logToConsole=function(e){return console.log(e),!0},getUser=function(){var e=o(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getUser();case 2:if(r=e.sent,console.info(r),null!=r){e.next=6;break}return e.abrupt("return",{});case 6:return e.abrupt("return",{accessToken:r.access_token,tokenType:r.token_type,Scope:r.scope,Profile:{UserId:r.profile.sub,Name:r.profile.name,Email:r.profile.email,Website:r.profile.website}});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),startSignin=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.signinRedirect();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),startSignOut=function(){var e=o(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.signoutRedirect({id_token_hint:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}(),callback=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.signinRedirectCallback();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),silent=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.signinSilentCallback();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),refresh=function(e){return location.reload(e),!0},a.events.addAccessTokenExpiring(function(){console.log("token expiring"),log("token expiring")}),a.events.addAccessTokenExpired(function(){console.log("token expired"),log("token expired")}),a.events.addSilentRenewError(function(e){console.log("silent renew error",e.message),log("silent renew error",e.message)}),a.events.addUserLoaded(function(e){console.log("user loaded",e),a.getUser().then(function(){console.log("getUser loaded user after userLoaded event fired")})}),a.events.addUserUnloaded(function(e){console.log("user unloaded")})},function(e,r){},function(e,r,t){},,function(e){e.exports={webServer:"http://localhost:8080",authorityServer:"http://localhost:5001",catalogService:"http://localhost:5002",cartService:"http://localhost:5003",inventoryService:"http://localhost:5004",ratingService:"http://localhost:5007"}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vY2xpZW50L2FwcC9qcy9hcHAuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJyZXF1aXJlIiwiY29uZmlnIiwiT2lkYyIsIkxvZyIsImxvZ2dlciIsImNvbnNvbGUiLCJsZXZlbCIsIkRFQlVHIiwic2V0dGluZ3MiLCJhdXRob3JpdHkiLCJhdXRob3JpdHlTZXJ2ZXIiLCJjbGllbnRfaWQiLCJyZWRpcmVjdF91cmkiLCJjb25jYXQiLCJ3ZWJTZXJ2ZXIiLCJwb3N0X2xvZ291dF9yZWRpcmVjdF91cmkiLCJyZXNwb25zZV90eXBlIiwic2NvcGUiLCJwb3B1cF9yZWRpcmVjdF91cmkiLCJwb3B1cF9wb3N0X2xvZ291dF9yZWRpcmVjdF91cmkiLCJzaWxlbnRfcmVkaXJlY3RfdXJpIiwiYXV0b21hdGljU2lsZW50UmVuZXciLCJmaWx0ZXJQcm90b2NvbENsYWltcyIsImxvYWRVc2VySW5mbyIsIm1nciIsIlVzZXJNYW5hZ2VyIiwibG9nVG9Db25zb2xlIiwibWVzc2FnZSIsImxvZyIsImdldFVzZXIiLCJfcmVmIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJyZWdlbmVyYXRvclJ1bnRpbWUiLCJtYXJrIiwiX2NhbGxlZSIsInVzZXIiLCJ3cmFwIiwiX2NvbnRleHQiLCJwcmV2IiwibmV4dCIsInNlbnQiLCJpbmZvIiwiYWJydXB0IiwiYWNjZXNzVG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJ0b2tlblR5cGUiLCJ0b2tlbl90eXBlIiwiU2NvcGUiLCJQcm9maWxlIiwiVXNlcklkIiwicHJvZmlsZSIsInN1YiIsIk5hbWUiLCJFbWFpbCIsImVtYWlsIiwiV2Vic2l0ZSIsIndlYnNpdGUiLCJzdG9wIiwidGhpcyIsImFwcGx5IiwiYXJndW1lbnRzIiwic3RhcnRTaWduaW4iLCJfcmVmMiIsIl9jYWxsZWUyIiwiX2NvbnRleHQyIiwic2lnbmluUmVkaXJlY3QiLCJzdGFydFNpZ25PdXQiLCJfcmVmMyIsIl9jYWxsZWUzIiwiaWRUb2tlbiIsIl9jb250ZXh0MyIsInNpZ25vdXRSZWRpcmVjdCIsImlkX3Rva2VuX2hpbnQiLCJfeCIsImNhbGxiYWNrIiwiX3JlZjQiLCJfY2FsbGVlNCIsIl9jb250ZXh0NCIsInNpZ25pblJlZGlyZWN0Q2FsbGJhY2siLCJzaWxlbnQiLCJfcmVmNSIsIl9jYWxsZWU1IiwiX2NvbnRleHQ1Iiwic2lnbmluU2lsZW50Q2FsbGJhY2siLCJyZWZyZXNoIiwiaHJlZiIsImxvY2F0aW9uIiwicmVsb2FkIiwiZXZlbnRzIiwiYWRkQWNjZXNzVG9rZW5FeHBpcmluZyIsImFkZEFjY2Vzc1Rva2VuRXhwaXJlZCIsImFkZFNpbGVudFJlbmV3RXJyb3IiLCJlIiwiYWRkVXNlckxvYWRlZCIsInRoZW4iLCJhZGRVc2VyVW5sb2FkZWQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFB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QUFBMkMsRUFBQTNDLEtBQUEsRUFDTWYsRUFBSTJELHVCQURWLGNBQUFELEVBQUF4QyxPQUFBLFNBQUF3QyxFQUFBMUMsTUFBQSx3QkFBQTBDLEVBQUF6QixTQUFBd0IsRUFBQXZCLFNBQUgseUJBQUFzQixFQUFBckIsTUFBQUQsS0FBQUUsWUFBQSxHQUlOd0IsUUFBVSxTQUFDQyxHQUVULE9BREFDLFNBQVNDLE9BQU9GLElBQ1QsR0FNVDdELEVBQUlnRSxPQUFPQyx1QkFBdUIsV0FDaENwRixRQUFRdUIsSUFBSSxrQkFDWkEsSUFBSSxvQkFHTkosRUFBSWdFLE9BQU9FLHNCQUFzQixXQUMvQnJGLFFBQVF1QixJQUFJLGlCQUNaQSxJQUFJLG1CQUdOSixFQUFJZ0UsT0FBT0csb0JBQW9CLFNBQUNDLEdBQzlCdkYsUUFBUXVCLElBQUkscUJBQXNCZ0UsRUFBRWpFLFNBQ3BDQyxJQUFJLHFCQUFzQmdFLEVBQUVqRSxXQUc5QkgsRUFBSWdFLE9BQU9LLGNBQWMsU0FBQzFELEdBQ3hCOUIsUUFBUXVCLElBQUksY0FBZU8sR0FDM0JYLEVBQUlLLFVBQVVpRSxLQUFLLFdBQ2pCekYsUUFBUXVCLElBQUksd0RBSWhCSixFQUFJZ0UsT0FBT08sZ0JBQWdCLFNBQUNILEdBQzFCdkYsUUFBUXVCLElBQUkiLCJmaWxlIjoiYXBwLjIyY2Q3ZmQzMTNlODAxNDc4MWUyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsInJlcXVpcmUoXCIuL2xvZy5qc1wiKTtcbnJlcXVpcmUoXCIuLy4uL3N0eWxlcy9hcHAuY3NzXCIpO1xuXG5jb25zdCBjb25maWcgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9jb25maWcvY29uZmlnLmpzb25cIik7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIGNvbmZpZ1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuT2lkYy5Mb2cubG9nZ2VyID0gY29uc29sZTtcbk9pZGMuTG9nLmxldmVsID0gT2lkYy5Mb2cuREVCVUc7XG5cbmNvbnN0IHNldHRpbmdzID0ge1xuICBhdXRob3JpdHk6IGNvbmZpZy5hdXRob3JpdHlTZXJ2ZXIsXG4gIGNsaWVudF9pZDogXCJzcGFcIixcbiAgcmVkaXJlY3RfdXJpOiBgJHtjb25maWcud2ViU2VydmVyfS9jYWxsYmFja2AsXG4gIHBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaTogYCR7Y29uZmlnLndlYlNlcnZlcn1gLFxuICByZXNwb25zZV90eXBlOiBcImlkX3Rva2VuIHRva2VuXCIsXG4gIHNjb3BlOiBcImludmVudG9yeV9hcGlfc2NvcGUgY2FydF9hcGlfc2NvcGUgcHJpY2luZ19hcGlfc2NvcGUgcmV2aWV3X2FwaV9zY29wZSBjYXRhbG9nX2FwaV9zY29wZSByYXRpbmdfYXBpX3Njb3BlIG9wZW5pZCBwcm9maWxlXCIsXG5cbiAgcG9wdXBfcmVkaXJlY3RfdXJpOiBgJHtjb25maWcud2ViU2VydmVyfS9jYWxsYmFja2AsXG4gIHBvcHVwX3Bvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaTogYCR7Y29uZmlnLndlYlNlcnZlcn1gLFxuXG4gIHNpbGVudF9yZWRpcmVjdF91cmk6IGAke2NvbmZpZy53ZWJTZXJ2ZXJ9L3NpbGVudGAsXG4gIGF1dG9tYXRpY1NpbGVudFJlbmV3OiB0cnVlLFxuICAvL3NpbGVudFJlcXVlc3RUaW1lb3V0OjEwMDAwLFxuXG4gIGZpbHRlclByb3RvY29sQ2xhaW1zOiB0cnVlLFxuICBsb2FkVXNlckluZm86IHRydWVcbn07XG5cbmNvbnN0IG1nciA9IG5ldyBPaWRjLlVzZXJNYW5hZ2VyKHNldHRpbmdzKTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gYmVoYXZpb3JzXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5sb2dUb0NvbnNvbGUgPSAobWVzc2FnZSkgPT4ge1xuICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgcmV0dXJuIHRydWU7XG59O1xuXG5nZXRVc2VyID0gYXN5bmMgKCkgPT4ge1xuICB2YXIgdXNlciA9IGF3YWl0IG1nci5nZXRVc2VyKCk7XG4gIGNvbnNvbGUuaW5mbyh1c2VyKTtcbiAgaWYgKHVzZXIgPT0gbnVsbCkgcmV0dXJuIHt9O1xuICByZXR1cm4ge1xuICAgIGFjY2Vzc1Rva2VuOiB1c2VyLmFjY2Vzc190b2tlbixcbiAgICB0b2tlblR5cGU6IHVzZXIudG9rZW5fdHlwZSxcbiAgICBTY29wZTogdXNlci5zY29wZSxcbiAgICBQcm9maWxlOiB7XG4gICAgICBVc2VySWQ6IHVzZXIucHJvZmlsZS5zdWIsXG4gICAgICBOYW1lOiB1c2VyLnByb2ZpbGUubmFtZSxcbiAgICAgIEVtYWlsOiB1c2VyLnByb2ZpbGUuZW1haWwsXG4gICAgICBXZWJzaXRlOiB1c2VyLnByb2ZpbGUud2Vic2l0ZVxuICAgIH1cbiAgfTtcbn07XG5cbnN0YXJ0U2lnbmluID0gYXN5bmMgKCkgPT4ge1xuICBhd2FpdCBtZ3Iuc2lnbmluUmVkaXJlY3QoKTtcbn07XG5cbnN0YXJ0U2lnbk91dCA9IGFzeW5jIChpZFRva2VuKSA9PiB7XG4gIHJldHVybiBhd2FpdCBtZ3Iuc2lnbm91dFJlZGlyZWN0KHsgaWRfdG9rZW5faGludDogaWRUb2tlbiB9KTtcbn07XG5cbmNhbGxiYWNrID0gYXN5bmMgKCkgPT4ge1xuICByZXR1cm4gYXdhaXQgbWdyLnNpZ25pblJlZGlyZWN0Q2FsbGJhY2soKTtcbn07XG5cbnNpbGVudCA9IGFzeW5jICgpID0+IHtcbiAgcmV0dXJuIGF3YWl0IG1nci5zaWduaW5TaWxlbnRDYWxsYmFjaygpO1xufTtcblxucmVmcmVzaCA9IChocmVmKSA9PiB7XG4gIGxvY2F0aW9uLnJlbG9hZChocmVmKTtcbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBldmVudHNcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbm1nci5ldmVudHMuYWRkQWNjZXNzVG9rZW5FeHBpcmluZygoKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwidG9rZW4gZXhwaXJpbmdcIik7XG4gIGxvZyhcInRva2VuIGV4cGlyaW5nXCIpO1xufSk7XG5cbm1nci5ldmVudHMuYWRkQWNjZXNzVG9rZW5FeHBpcmVkKCgpID0+IHtcbiAgY29uc29sZS5sb2coXCJ0b2tlbiBleHBpcmVkXCIpO1xuICBsb2coXCJ0b2tlbiBleHBpcmVkXCIpO1xufSk7XG5cbm1nci5ldmVudHMuYWRkU2lsZW50UmVuZXdFcnJvcigoZSkgPT4ge1xuICBjb25zb2xlLmxvZyhcInNpbGVudCByZW5ldyBlcnJvclwiLCBlLm1lc3NhZ2UpO1xuICBsb2coXCJzaWxlbnQgcmVuZXcgZXJyb3JcIiwgZS5tZXNzYWdlKTtcbn0pO1xuXG5tZ3IuZXZlbnRzLmFkZFVzZXJMb2FkZWQoKHVzZXIpID0+IHtcbiAgY29uc29sZS5sb2coXCJ1c2VyIGxvYWRlZFwiLCB1c2VyKTtcbiAgbWdyLmdldFVzZXIoKS50aGVuKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcImdldFVzZXIgbG9hZGVkIHVzZXIgYWZ0ZXIgdXNlckxvYWRlZCBldmVudCBmaXJlZFwiKTtcbiAgfSk7XG59KTtcblxubWdyLmV2ZW50cy5hZGRVc2VyVW5sb2FkZWQoKGUpID0+IHtcbiAgY29uc29sZS5sb2coXCJ1c2VyIHVubG9hZGVkXCIpO1xufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9