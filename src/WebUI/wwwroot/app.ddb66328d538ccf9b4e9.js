!function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)n.d(t,o,function(r){return e[r]}.bind(null,o));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="/",n(n.s=0)}([function(e,r,n){function t(e,r,n,t,o,i,u){try{var c=e[i](u),a=c.value}catch(e){return void n(e)}c.done?r(a):Promise.resolve(a).then(t,o)}function o(e){return function(){var r=this,n=arguments;return new Promise(function(o,i){var u=e.apply(r,n);function c(e){t(u,o,i,c,a,"next",e)}function a(e){t(u,o,i,c,a,"throw",e)}c(void 0)})}}n(1),n(2);var i=n(4);logToConsole=function(e){return console.log(e),!0},getUser=function(){var e=o(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getUser();case 2:if(r=e.sent,console.info(r),null!=r){e.next=6;break}return e.abrupt("return",{});case 6:return e.abrupt("return",{accessToken:r.access_token,tokenType:r.token_type,Scope:r.scope,Profile:{UserId:r.profile.sub,Name:r.profile.name,Email:r.profile.email,Website:r.profile.website}});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),startSignin=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.signinRedirect();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),startSignOut=function(){var e=o(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.signoutRedirect({id_token_hint:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}(),callback=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.signinRedirectCallback();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),silent=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.signinSilentCallback();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),refresh=function(e){return location.reload(e),!0},Oidc.Log.logger=console,Oidc.Log.level=Oidc.Log.DEBUG;var u={authority:i.authorityServer,client_id:"implicit",redirect_uri:"".concat(i.currentServer,"/callback"),post_logout_redirect_uri:"".concat(i.currentServer),response_type:"id_token token",scope:"openid profile email api",popup_redirect_uri:"".concat(i.currentServer,"/callback"),popup_post_logout_redirect_uri:"".concat(i.currentServer),silent_redirect_uri:"".concat(i.currentServer,"/silent"),automaticSilentRenew:!0,filterProtocolClaims:!0,loadUserInfo:!0},c=new Oidc.UserManager(u);c.events.addAccessTokenExpiring(function(){console.log("token expiring"),log("token expiring")}),c.events.addAccessTokenExpired(function(){console.log("token expired"),log("token expired")}),c.events.addSilentRenewError(function(e){console.log("silent renew error",e.message),log("silent renew error",e.message)}),c.events.addUserLoaded(function(e){console.log("user loaded",e),c.getUser().then(function(){console.log("getUser loaded user after userLoaded event fired")})}),c.events.addUserUnloaded(function(e){console.log("user unloaded")})},function(e,r){},function(e,r,n){},,function(e){e.exports={authorityServer:"https://demo.identityserver.io/",currentServer:"http://localhost:5003"}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vY2xpZW50LWFwcC9qcy9hcHAuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJyZXF1aXJlIiwiY29uZmlnIiwibG9nVG9Db25zb2xlIiwibWVzc2FnZSIsImNvbnNvbGUiLCJsb2ciLCJnZXRVc2VyIiwiX3JlZiIsIl9hc3luY1RvR2VuZXJhdG9yIiwicmVnZW5lcmF0b3JSdW50aW1lIiwibWFyayIsIl9jYWxsZWUiLCJ1c2VyIiwid3JhcCIsIl9jb250ZXh0IiwicHJldiIsIm5leHQiLCJtZ3IiLCJzZW50IiwiaW5mbyIsImFicnVwdCIsImFjY2Vzc1Rva2VuIiwiYWNjZXNzX3Rva2VuIiwidG9rZW5UeXBlIiwidG9rZW5fdHlwZSIsIlNjb3BlIiwic2NvcGUiLCJQcm9maWxlIiwiVXNlcklkIiwicHJvZmlsZSIsInN1YiIsIk5hbWUiLCJFbWFpbCIsImVtYWlsIiwiV2Vic2l0ZSIsIndlYnNpdGUiLCJzdG9wIiwidGhpcyIsImFwcGx5IiwiYXJndW1lbnRzIiwic3RhcnRTaWduaW4iLCJfcmVmMiIsIl9jYWxsZWUyIiwiX2NvbnRleHQyIiwic2lnbmluUmVkaXJlY3QiLCJzdGFydFNpZ25PdXQiLCJfcmVmMyIsIl9jYWxsZWUzIiwiaWRUb2tlbiIsIl9jb250ZXh0MyIsInNpZ25vdXRSZWRpcmVjdCIsImlkX3Rva2VuX2hpbnQiLCJfeCIsImNhbGxiYWNrIiwiX3JlZjQiLCJfY2FsbGVlNCIsIl9jb250ZXh0NCIsInNpZ25pblJlZGlyZWN0Q2FsbGJhY2siLCJzaWxlbnQiLCJfcmVmNSIsIl9jYWxsZWU1IiwiX2NvbnRleHQ1Iiwic2lnbmluU2lsZW50Q2FsbGJhY2siLCJyZWZyZXNoIiwiaHJlZiIsImxvY2F0aW9uIiwicmVsb2FkIiwiT2lkYyIsIkxvZyIsImxvZ2dlciIsImxldmVsIiwiREVCVUciLCJzZXR0aW5ncyIsImF1dGhvcml0eSIsImF1dGhvcml0eVNlcnZlciIsImNsaWVudF9pZCIsInJlZGlyZWN0X3VyaSIsImNvbmNhdCIsImN1cnJlbnRTZXJ2ZXIiLCJwb3N0X2xvZ291dF9yZWRpcmVjdF91cmkiLCJyZXNwb25zZV90eXBlIiwicG9wdXBfcmVkaXJlY3RfdXJpIiwicG9wdXBfcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpIiwic2lsZW50X3JlZGlyZWN0X3VyaSIsImF1dG9tYXRpY1NpbGVudFJlbmV3IiwiZmlsdGVyUHJvdG9jb2xDbGFpbXMiLCJsb2FkVXNlckluZm8iLCJVc2VyTWFuYWdlciIsImV2ZW50cyIsImFkZEFjY2Vzc1Rva2VuRXhwaXJpbmciLCJhZGRBY2Nlc3NUb2tlbkV4cGlyZWQiLCJhZGRTaWxlbnRSZW5ld0Vycm9yIiwiZSIsImFkZFVzZXJMb2FkZWQiLCJ0aGVuIiwiYWRkVXNlclVubG9hZGVkIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FG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Y0FBZSxpQkFDZnRELE1BQU8sMkJBRVB1RCxtQkFBa0IsR0FBQUosT0FBSzVFLEVBQU82RSxjQUFaLGFBQ2xCSSwrQkFBOEIsR0FBQUwsT0FBSzVFLEVBQU82RSxlQUUxQ0ssb0JBQW1CLEdBQUFOLE9BQUs1RSxFQUFPNkUsY0FBWixXQUNuQk0sc0JBQXNCLEVBR3RCQyxzQkFBc0IsRUFDdEJDLGNBQWMsR0FHVnJFLEVBQU0sSUFBSWtELEtBQUtvQixZQUFZZixHQUtqQ3ZELEVBQUl1RSxPQUFPQyx1QkFBdUIsV0FDaENyRixRQUFRQyxJQUFJLGtCQUNaQSxJQUFJLG9CQUdOWSxFQUFJdUUsT0FBT0Usc0JBQXNCLFdBQy9CdEYsUUFBUUMsSUFBSSxpQkFDWkEsSUFBSSxtQkFHTlksRUFBSXVFLE9BQU9HLG9CQUFvQixTQUFDQyxHQUM5QnhGLFFBQVFDLElBQUkscUJBQXNCdUYsRUFBRXpGLFNBQ3BDRSxJQUFJLHFCQUFzQnVGLEVBQUV6RixXQUc5QmMsRUFBSXVFLE9BQU9LLGNBQWMsU0FBQ2pGLEdBQ3hCUixRQUFRQyxJQUFJLGNBQWVPLEdBQzNCSyxFQUFJWCxVQUFVd0YsS0FBSyxXQUNqQjFGLFFBQVFDLElBQUksd0RBSWhCWSxFQUFJdUUsT0FBT08sZ0JBQWdCLFNBQUNILEdBQzFCeEYsUUFBUUMsSUFBSSIsImZpbGUiOiJhcHAuZGRiNjYzMjhkNTM4Y2NmOWI0ZTkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwicmVxdWlyZShcIi4vbG9nLmpzXCIpO1xucmVxdWlyZShcIi4vLi4vc3R5bGVzL2FwcC5jc3NcIik7XG5cbmNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoXCIuLy4uLy4uL2NvbmZpZy9jb25maWcuanNvblwiKTtcblxubG9nVG9Db25zb2xlID0gKG1lc3NhZ2UpID0+IHtcbiAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gIHJldHVybiB0cnVlO1xufTtcblxuZ2V0VXNlciA9IGFzeW5jICgpID0+IHtcbiAgdmFyIHVzZXIgPSBhd2FpdCBtZ3IuZ2V0VXNlcigpO1xuICBjb25zb2xlLmluZm8odXNlcik7XG4gIGlmICh1c2VyID09IG51bGwpIHJldHVybiB7fTtcbiAgcmV0dXJuIHtcbiAgICBhY2Nlc3NUb2tlbjogdXNlci5hY2Nlc3NfdG9rZW4sXG4gICAgdG9rZW5UeXBlOiB1c2VyLnRva2VuX3R5cGUsXG4gICAgU2NvcGU6IHVzZXIuc2NvcGUsXG4gICAgUHJvZmlsZToge1xuICAgICAgVXNlcklkOiB1c2VyLnByb2ZpbGUuc3ViLFxuICAgICAgTmFtZTogdXNlci5wcm9maWxlLm5hbWUsXG4gICAgICBFbWFpbDogdXNlci5wcm9maWxlLmVtYWlsLFxuICAgICAgV2Vic2l0ZTogdXNlci5wcm9maWxlLndlYnNpdGVcbiAgICB9XG4gIH07XG59O1xuXG5zdGFydFNpZ25pbiA9IGFzeW5jICgpID0+IHtcbiAgYXdhaXQgbWdyLnNpZ25pblJlZGlyZWN0KCk7XG59O1xuXG5zdGFydFNpZ25PdXQgPSBhc3luYyAoaWRUb2tlbikgPT4ge1xuICByZXR1cm4gYXdhaXQgbWdyLnNpZ25vdXRSZWRpcmVjdCh7IGlkX3Rva2VuX2hpbnQ6IGlkVG9rZW4gfSk7XG59O1xuXG5jYWxsYmFjayA9IGFzeW5jICgpID0+IHtcbiAgcmV0dXJuIGF3YWl0IG1nci5zaWduaW5SZWRpcmVjdENhbGxiYWNrKCk7XG59O1xuXG5zaWxlbnQgPSBhc3luYyAoKSA9PiB7XG4gIHJldHVybiBhd2FpdCBtZ3Iuc2lnbmluU2lsZW50Q2FsbGJhY2soKTtcbn07XG5cbnJlZnJlc2ggPSAoaHJlZikgPT4ge1xuICBsb2NhdGlvbi5yZWxvYWQoaHJlZik7XG4gIHJldHVybiB0cnVlO1xufTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gY29uZmlnXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5PaWRjLkxvZy5sb2dnZXIgPSBjb25zb2xlO1xuT2lkYy5Mb2cubGV2ZWwgPSBPaWRjLkxvZy5ERUJVRztcblxuY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGF1dGhvcml0eTogY29uZmlnLmF1dGhvcml0eVNlcnZlcixcbiAgY2xpZW50X2lkOiBcImltcGxpY2l0XCIsXG4gIHJlZGlyZWN0X3VyaTogYCR7Y29uZmlnLmN1cnJlbnRTZXJ2ZXJ9L2NhbGxiYWNrYCxcbiAgcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpOiBgJHtjb25maWcuY3VycmVudFNlcnZlcn1gLFxuICByZXNwb25zZV90eXBlOiBcImlkX3Rva2VuIHRva2VuXCIsXG4gIHNjb3BlOiBcIm9wZW5pZCBwcm9maWxlIGVtYWlsIGFwaVwiLFxuXG4gIHBvcHVwX3JlZGlyZWN0X3VyaTogYCR7Y29uZmlnLmN1cnJlbnRTZXJ2ZXJ9L2NhbGxiYWNrYCxcbiAgcG9wdXBfcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpOiBgJHtjb25maWcuY3VycmVudFNlcnZlcn1gLFxuXG4gIHNpbGVudF9yZWRpcmVjdF91cmk6IGAke2NvbmZpZy5jdXJyZW50U2VydmVyfS9zaWxlbnRgLFxuICBhdXRvbWF0aWNTaWxlbnRSZW5ldzogdHJ1ZSxcbiAgLy9zaWxlbnRSZXF1ZXN0VGltZW91dDoxMDAwMCxcblxuICBmaWx0ZXJQcm90b2NvbENsYWltczogdHJ1ZSxcbiAgbG9hZFVzZXJJbmZvOiB0cnVlXG59O1xuXG5jb25zdCBtZ3IgPSBuZXcgT2lkYy5Vc2VyTWFuYWdlcihzZXR0aW5ncyk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIGV2ZW50c1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xubWdyLmV2ZW50cy5hZGRBY2Nlc3NUb2tlbkV4cGlyaW5nKCgpID0+IHtcbiAgY29uc29sZS5sb2coXCJ0b2tlbiBleHBpcmluZ1wiKTtcbiAgbG9nKFwidG9rZW4gZXhwaXJpbmdcIik7XG59KTtcblxubWdyLmV2ZW50cy5hZGRBY2Nlc3NUb2tlbkV4cGlyZWQoKCkgPT4ge1xuICBjb25zb2xlLmxvZyhcInRva2VuIGV4cGlyZWRcIik7XG4gIGxvZyhcInRva2VuIGV4cGlyZWRcIik7XG59KTtcblxubWdyLmV2ZW50cy5hZGRTaWxlbnRSZW5ld0Vycm9yKChlKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwic2lsZW50IHJlbmV3IGVycm9yXCIsIGUubWVzc2FnZSk7XG4gIGxvZyhcInNpbGVudCByZW5ldyBlcnJvclwiLCBlLm1lc3NhZ2UpO1xufSk7XG5cbm1nci5ldmVudHMuYWRkVXNlckxvYWRlZCgodXNlcikgPT4ge1xuICBjb25zb2xlLmxvZyhcInVzZXIgbG9hZGVkXCIsIHVzZXIpO1xuICBtZ3IuZ2V0VXNlcigpLnRoZW4oKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiZ2V0VXNlciBsb2FkZWQgdXNlciBhZnRlciB1c2VyTG9hZGVkIGV2ZW50IGZpcmVkXCIpO1xuICB9KTtcbn0pO1xuXG5tZ3IuZXZlbnRzLmFkZFVzZXJVbmxvYWRlZCgoZSkgPT4ge1xuICBjb25zb2xlLmxvZyhcInVzZXIgdW5sb2FkZWRcIik7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=